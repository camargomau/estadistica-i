---
title: "Introducción a R"
output: pdf_document
author: "Luis Mauricio Camargo Badillo"
date: "23 de octuble de 2023"
linestretch: 1.5
---

# Introducción a R

## Ejercicio 0

Sumar 2+2:

```{r}
2+2
```

Raíz cuadrada de 10:

```{r}
sqrt(10)
```

## Ejercicio 1

Página de ayuda de `read_csv()`:

```{r message=FALSE}
library(tidyverse)
?read_csv()
```

Leer la información de los nombres de bebés y asignarla a `baby_names`:

```{r message=FALSE}
baby_names <- read_csv("Datos/babyNames.csv")
```

Guardar `baby_names` como un data set de R en un archivo `babynames.rds`:

```{r}
write_rds(baby_names, file = "Datos/babynames.rds")
```

# Ejercicio 2.1

Usar `filter()` para extraer los datos de mi nombre (Mauricio):

```{r}
baby_names_mauricio <- filter(baby_names, Name == "Mauricio")
```

Ordenar los datos del paso anterior según `Count`:

```{r}
arrange(baby_names_mauricio, desc(Count))
```

Filtrar los datos, extrayendo solo la fila que contiene el nombre más popular para niños en 1999:

```{r}
baby_names_boys <- filter(baby_names, Sex == "Boys" & Year == 1999)
filter(baby_names_boys, Count == max(Count))
```

# Ejercicio 2.2

```{r}
baby_names %>% filter(Name == "Mauricio") %>% arrange(desc(Count))
```

# Ejercicio 3

No hace falta volver a extraer los datos correspondientes a mi nombre.

Graficar los datos correspondientes a mi nombre, con `Year` en las abscisas y `Count` en las ordenadas:

```{r}
qplot(x = Year, y = Count, data = baby_names_mauricio)
```

Ajustando la gráfica para mostrar a niños y niñas con diferentes colores:

```{r}
qplot(x = Year, y = Count, colour = Sex, data = baby_names_mauricio)
```

En la gráfica, utilizar líneas en lugar de puntos:

```{r}
qplot(x = Year, y = Count, colour = Sex, data = baby_names_mauricio, geom = "line")
```

# Ejercicio 4

Utilizar `mutate()` y `group_by()` para crear una columna `Proportion` donde `Proportion = Count/sum(Count)` para cada grupo `Year X Sex`:

```{r}
baby_names <- baby_names %>% group_by(Year, Sex) %>% mutate(Proportion = Count/sum(Count)) %>% ungroup()

baby_names
```

Utilizar `mutate()` y `group_by()` para crear una columna llamada `Rank` donde `Rank = rank(desc(Count))` para cada grupo `Year X Sex`:

```{r}
baby_names <- baby_names %>% group_by(Year, Sex) %>% mutate(Rank = rank(desc(Count))) %>% ungroup()

baby_names
```

Filtrar los datos, msotrando solo el nombre más popular para cada grupo `Year X Sex`, manteniendo solo las columnas `Year`, `Name`, `Sex` y `Proportion:

```{r}
baby_names_popular <- baby_names %>% filter(Rank == 1) %>% select(Year, Name, Sex, Proportion)

baby_names_popular
```

Graficar los datos del paso anterior, poniendo a `Year` en las abscisas y `Proportion` en las ordenadas:

```{r}
qplot(x = Year, y = Proportion, colour = Sex, data = baby_names_popular, geom = "line")
```

# Ejercicio 5

Filtrar lros datos `baby_names`, conservando únicamente los 10 nombres más populares para niñas y niños en cada año:

```{r}
baby_names_top10 <- baby_names %>% group_by(Year, Sex) %>% filter(Rank <= 10)

baby_names_top10
```

Resumir los datos del paso anterior para calcular la proporción total `TotalProportion` de niñas y niños con nombres en el top 10:

```{r}
baby_names_top10_proportion <- baby_names_top10 %>% summarise(TotalProportion = sum(Proportion))

baby_names_top10_proportion
```

Graficar los datos del paso anterior, con `Year` en las abscisas y `TotalProportion` en las ordenadas:

```{r}
qplot(x = Year, y = TotalProportion, colour = Sex, data = baby_names_top10_proportion, geom = "line")
```
